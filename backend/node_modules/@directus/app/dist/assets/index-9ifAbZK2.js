import{T as We,w as Ne,a as Ce,v as Te}from"./vue.runtime.esm-bundler-BY4gCD-H.js";import{v as Ee,u as $e,w as Be,_ as q,x as ye,y as ue,z as we,M as Oe,A as ve,B as Le,C as Ae,D as Re,E as je,F as Fe,G as qe,S as ze,H as He,I as Me,J as Pe,K as Ge,L as Ze,N as Ke,O as Ye,V as xe,P as Je}from"./index.Dj_SK1X1.entry.js";import{r as Qe,u as Xe,a as et,b as tt,d as nt}from"./index-DqDL7Qf0.js";import{storeToRefs as ce}from"./pinia.ZGOsqJmi.entry.js";import{useI18n as ae}from"./vue-i18n.upvyfvU5.entry.js";import{useRoute as ot,useRouter as Ie}from"./vue-router.Dt24BTtJ.entry.js";import{e as z,c as S,f as N,bj as Se,w as ne,b5 as m,b6 as Q,by as R,aY as s,ad as b,bw as a,af as x,I as oe,y as l,ae as B,ag as C,aN as j,b7 as De,u as v,ak as F,bf as T,b3 as se,aF as st,b4 as J,aM as at,n as lt,p as it,ai as rt,aO as ct,ax as ut,a$ as dt,aZ as vt}from"./runtime-core.esm-bundler-zlSgKseS.js";const _t=["src"],mt=z({__name:"module-bar-logo",setup(i){const{t:e}=ae(),o=Ee(),r=$e(),n=S(()=>{var u;return r.settings===null||!((u=r.settings)!=null&&u.project_logo)?null:Be(`${r.settings.project_logo}`)}),t=N(!1),{queueHasItems:p}=Se(o);ne(()=>p.value,u=>{u&&(t.value=!0)});const _=S(()=>{var u;return(u=r.settings)==null?void 0:u.project_url}),h=S(()=>{var u;return(u=r.settings)!=null&&u.project_url?e("view_project"):!1});function c(){p.value===!1&&(t.value=!1)}return(u,w)=>{const g=m("v-progress-linear"),$=Q("tooltip");return R((s(),b(De(_.value?"a":"div"),{href:_.value,target:_.value?"_blank":void 0,rel:_.value?"noopener noreferrer":void 0,class:j(["module-bar-logo",{loading:t.value}])},{default:a(()=>[n.value?(s(),x(oe,{key:0},[l(We,{name:"fade"},{default:a(()=>[t.value?(s(),b(g,{key:0,indeterminate:"",rounded:"",onAnimationiteration:c})):B("",!0)]),_:1}),C("img",{class:"custom-logo",src:n.value,alt:"Project Logo"},null,8,_t)],64)):(s(),x("div",{key:1,class:j(["logo",{running:t.value}]),onAnimationiteration:c},null,34))]),_:1},8,["href","target","rel","class"])),[[$,h.value,void 0,{right:!0}]])}}}),pt=q(mt,[["__scopeId","data-v-d86ce83c"]]),ft={class:"module-bar-avatar"},ht=["src","alt"],gt=z({__name:"module-bar-avatar",setup(i){const{t:e}=ae(),o=ye(),r=ue(),{notificationsDrawerOpen:n}=ce(o),{unread:t}=ce(r),p=we(),_=N(!1),h=S(()=>{var $;return!p.currentUser||!("avatar"in p.currentUser)||!(($=p.currentUser)!=null&&$.avatar)?null:Be(`${p.currentUser.avatar.id}?key=system-medium-cover`)}),c=N(null),u=S(()=>`/users/${p.currentUser.id}`),w=S(()=>"/logout"),g=p.fullName??void 0;return($,f)=>{const L=m("v-icon"),E=m("v-button"),I=m("v-badge"),V=m("v-card-title"),Z=m("v-card-actions"),X=m("v-card"),ee=m("v-dialog"),G=m("v-avatar"),le=m("router-link"),K=m("v-hover"),te=Q("tooltip");return s(),x("div",ft,[l(I,{value:v(t),disabled:v(t)==0,class:"notifications-badge"},{default:a(()=>[R((s(),b(E,{tile:"",icon:"","x-large":"",class:"notifications",onClick:f[0]||(f[0]=P=>n.value=!0)},{default:a(()=>[l(L,{name:"notifications"})]),_:1})),[[te,v(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),l(K,null,{default:a(({hover:P})=>[l(ee,{modelValue:_.value,"onUpdate:modelValue":f[2]||(f[2]=O=>_.value=O),onEsc:f[3]||(f[3]=O=>_.value=!1)},{activator:a(({on:O})=>[l(We,{name:"sign-out"},{default:a(()=>[P?R((s(),b(E,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:O},{default:a(()=>[l(L,{name:"logout"})]),_:2},1032,["onClick"])),[[te,v(e)("sign_out"),void 0,{right:!0}]]):B("",!0)]),_:2},1024)]),default:a(()=>[l(X,null,{default:a(()=>[l(V,null,{default:a(()=>[F(T(v(e)("sign_out_confirm")),1)]),_:1}),l(Z,null,{default:a(()=>[l(E,{secondary:"",onClick:f[1]||(f[1]=O=>_.value=!_.value)},{default:a(()=>[F(T(v(e)("cancel")),1)]),_:1}),l(E,{to:w.value},{default:a(()=>[F(T(v(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),l(le,{to:u.value},{default:a(()=>[R((s(),b(G,{tile:"",large:"",class:j({"no-avatar":!h.value})},{default:a(()=>[h.value&&!c.value?(s(),x("img",{key:0,src:h.value,alt:v(g),class:"avatar-image",onError:f[4]||(f[4]=O=>c.value=O)},null,40,ht)):(s(),b(L,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[te,v(g),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}}),bt=q(gt,[["__scopeId","data-v-f9f544dc"]]),yt={class:"module-bar"},wt={class:"modules"},kt=z({__name:"module-bar",setup(i){const e=$e(),{modules:o}=Ae(),r=S(()=>o.value.map(t=>t.id)),n=S(()=>e.settings?(e.settings.module_bar??Oe).filter(t=>t.type==="link"?!0:t.enabled&&r.value.includes(t.id)).map(t=>{if(t.type==="link"){const _=ve.omit(t,["url"]);return t.url.startsWith("/")?_.to=t.url:_.href=t.url,Le(_)}const p=o.value.find(_=>_.id===t.id);return{...t,...o.value.find(_=>_.id===t.id),to:`/${p.id}`}}):[]);return(t,p)=>{const _=m("v-icon"),h=m("v-button"),c=Q("tooltip");return s(),x("div",yt,[l(pt),C("div",wt,[(s(!0),x(oe,null,se(n.value,u=>R((s(),b(h,{key:u.id,icon:"","x-large":"",to:u.to,href:u.href,tile:""},{default:a(()=>[l(_,{name:u.icon},null,8,["name"])]),_:2},1032,["to","href"])),[[c,u.name,void 0,{right:!0}]])),128))]),l(bt)])}}}),$t=q(kt,[["__scopeId","data-v-572954c3"]]),St={class:"notification-dialogs"},Nt=["href"],Mt=z({__name:"notification-dialogs",setup(i){const{t:e}=ae(),o=ue(),{isAdmin:r,currentUser:n}=we(),{settings:t}=ce($e()),p=S(()=>o.dialogs);function _(c){var g,$,f;if(!((g=t.value)!=null&&g.report_error_url))return Re;const u=ot(),w={error:{name:c==null?void 0:c.name,message:c==null?void 0:c.message},route:{fullPath:u.fullPath,hash:u.hash,name:u.name,path:u.path,query:u.query},navigator:{language:navigator.language,userAgent:navigator.userAgent},user:{},role:{}};return n!==null&&"id"in n&&(w.user={id:n.id,first_name:n.first_name,last_name:n.last_name,title:n.title,description:n.description,location:n.location,status:n.status},w.role={id:($=n.role)==null?void 0:$.id,name:(f=n.role)==null?void 0:f.name}),Qe(t.value.report_error_url,w)}const h=async c=>{c.dismissAction&&await c.dismissAction(),o.remove(c.id)};return(c,u)=>{const w=m("v-card-title"),g=m("v-error"),$=m("v-card-text"),f=m("v-button"),L=m("v-card-actions"),E=m("v-card"),I=m("v-dialog");return s(),x("div",St,[(s(!0),x(oe,null,se(p.value,V=>(s(),b(I,{key:V.id,"model-value":"",persist:""},{default:a(()=>[l(E,{class:j([V.type])},{default:a(()=>[l(w,null,{default:a(()=>[F(T(V.title),1)]),_:2},1024),V.text||V.error?(s(),b($,{key:0},{default:a(()=>[F(T(V.text)+" ",1),V.error?(s(),b(g,{key:0,error:V.error},null,8,["error"])):B("",!0)]),_:2},1024)):B("",!0),l(L,null,{default:a(()=>[V.type==="error"&&v(r)&&V.code==="UNKNOWN"?(s(),b(f,{key:0,secondary:""},{default:a(()=>[C("a",{target:"_blank",href:_(V.error)},T(v(e)("report_error")),9,Nt)]),_:2},1024)):B("",!0),l(f,{onClick:Z=>h(V)},{default:a(()=>[F(T(V.dismissText??v(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}}),xt=q(Mt,[["__scopeId","data-v-8f4b67f7"]]),Vt={key:1,class:"content"},Wt=["onClick"],Ct={key:0,class:"message"},Bt=z({__name:"notifications-drawer",setup(i){const{t:e}=ae(),o=ye(),r=we(),n=je(),{setUnreadCount:t}=ue(),p=Ie(),_=N([]),h=N(["inbox"]),c=N([]),u=N(1),w=N(25),g=N(null),$=N({}),f=N(null);ne(h,(M,W)=>{M[0]!==W[0]&&(u.value=1,_.value=[])}),ne([g,$],()=>{u.value=1});function L(M){_.value.includes(M)?_.value.splice(_.value.indexOf(M),1):_.value.push(M)}function E(M){c.value.includes(M)?c.value.splice(c.value.indexOf(M),1):c.value.push(M)}const{notificationsDrawerOpen:I}=ce(o),V=S(()=>({_and:[{recipient:{_eq:r.currentUser.id}},{status:{_eq:h.value[0]}},$.value]})),{items:Z,loading:X,getItems:ee,totalPages:G,getItemCount:le}=Xe(N("directus_notifications"),{filter:V,fields:N(["id","subject","message","collection","item","timestamp"]),sort:N(["-timestamp"]),search:g,limit:w,page:u}),K=S(()=>Z.value.map(M=>{var A;let W;if(M.collection){const D=n.getCollection(M.collection);(A=D==null?void 0:D.meta)!=null&&A.singleton||!M.item?W=Fe(M.collection):W=qe(M.collection,M.item)}else String(M.item).startsWith("/")&&(W=String(M.item));return{...M,to:W}}));async function te(){await Me.patch("/notifications",{query:{recipient:{_eq:r.currentUser.id}},data:{status:"archived"}}),await le(),await ee(),t(0)}async function P(){await Me.patch("/notifications",{keys:_.value,data:{status:h.value[0]==="inbox"?"archived":"inbox"}}),await le(),await ee(),_.value=[]}function O(M){p.push(M),I.value=!1}return(M,W)=>{const A=m("v-icon"),D=m("v-button"),de=m("v-list-item-icon"),_e=m("v-list-item-content"),me=m("v-tab"),pe=m("v-tabs"),fe=m("v-info"),he=m("v-skeleton-loader"),d=m("v-list"),y=m("v-checkbox"),H=m("v-text-overflow"),ie=m("v-list-item"),ge=m("v-pagination"),U=m("v-drawer"),re=Q("tooltip"),ke=Q("md");return s(),b(U,{modelValue:v(I),"onUpdate:modelValue":W[5]||(W[5]=k=>st(I)?I.value=k:null),icon:"notifications",title:v(e)("notifications"),"sidebar-label":v(e)("folders"),onCancel:W[6]||(W[6]=k=>I.value=!1)},{actions:a(()=>[l(ze,{modelValue:g.value,"onUpdate:modelValue":W[0]||(W[0]=k=>g.value=k),filter:$.value,"onUpdate:filter":W[1]||(W[1]=k=>$.value=k),collection:"directus_notifications"},null,8,["modelValue","filter"]),R((s(),b(D,{icon:"",rounded:"",disabled:_.value.length===0,secondary:"",onClick:P},{default:a(()=>[l(A,{name:h.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[re,h.value[0]==="inbox"?v(e)("archive"):v(e)("unarchive"),void 0,{bottom:!0}]]),h.value[0]==="inbox"?R((s(),b(D,{key:0,icon:"",rounded:"",disabled:K.value.length===0,onClick:te},{default:a(()=>[l(A,{name:"done_all"})]),_:1},8,["disabled"])),[[re,v(e)("archive_all"),void 0,{bottom:!0}]]):B("",!0)]),sidebar:a(()=>[l(pe,{modelValue:h.value,"onUpdate:modelValue":W[2]||(W[2]=k=>h.value=k),vertical:""},{default:a(()=>[l(me,{value:"inbox"},{default:a(()=>[l(de,null,{default:a(()=>[l(A,{name:"inbox"})]),_:1}),l(_e,null,{default:a(()=>[F(T(v(e)("inbox")),1)]),_:1})]),_:1}),l(me,{value:"archived"},{default:a(()=>[l(de,null,{default:a(()=>[l(A,{name:"archive"})]),_:1}),l(_e,null,{default:a(()=>[F(T(v(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:a(()=>[!v(X)&&K.value.length===0?(s(),b(fe,{key:0,icon:"notifications",title:v(e)("no_notifications"),center:""},{default:a(()=>[F(T(v(e)("no_notifications_copy")),1)]),_:1},8,["title"])):(s(),x("div",Vt,[v(X)?(s(),b(d,{key:0,class:"notifications"},{default:a(()=>[(s(),x(oe,null,se(10,k=>l(he,{key:k,class:j({dense:v(G)>1})},null,8,["class"])),64))]),_:1})):(s(),b(d,{key:1,class:"notifications"},{default:a(()=>[(s(!0),x(oe,null,se(K.value,k=>(s(),b(ie,{key:k.id,block:"",dense:v(G)>1,clickable:!!k.message,onMousedown:W[3]||(W[3]=Ne(({target:Y})=>f.value=Y,["left","self"])),onMouseup:Ne(({target:Y})=>{Y===f.value&&E(k.id),f.value=null},["left","self"])},{default:a(()=>[C("div",{class:"header",onClick:Y=>E(k.id)},[l(y,{"model-value":_.value.includes(k.id),"onUpdate:modelValue":Y=>L(k.id)},null,8,["model-value","onUpdate:modelValue"]),l(H,{class:"title",highlight:g.value,text:k.subject},null,8,["highlight","text"]),l(He,{value:k.timestamp,type:"timestamp",relative:""},{default:a(({datetime:Y})=>[l(H,{class:"datetime",text:Y},null,8,["text"])]),_:2},1032,["value"]),k.to?R((s(),b(A,{key:0,clickable:"",name:"open_in_new",onClick:Y=>O(k.to)},null,8,["onClick"])),[[re,v(e)("goto_collection_content")]]):B("",!0),k.message?(s(),b(A,{key:1,clickable:"",name:c.value.includes(k.id)?"expand_less":"expand_more"},null,8,["name"])):B("",!0)],8,Wt),c.value.includes(k.id)&&k.message?R((s(),x("div",Ct,null,512)),[[ke,k.message]]):B("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})),v(G)>1?(s(),b(ge,{key:2,modelValue:u.value,"onUpdate:modelValue":W[4]||(W[4]=k=>u.value=k),"total-visible":5,length:v(G)},null,8,["modelValue","length"])):B("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),It=q(Bt,[["__scopeId","data-v-81248a9d"]]),Dt={key:0,class:"icon"},Ut={class:"content"},Tt={class:"title selectable"},Et={key:0,class:"text selectable"},Ot=z({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{},alwaysShowText:{type:Boolean},dismissText:{},dismissIcon:{},dismissAction:{}},setup(i){const e=i,o=ue(),r=async()=>{e.showClose===!0&&(e.dismissAction&&await e.dismissAction(),o.remove(e.id))};return(n,t)=>{const p=m("v-progress-circular"),_=m("v-icon"),h=Q("tooltip");return s(),x("div",{class:j(["notification-item",[n.type,{tail:n.tail,dense:n.dense,"show-text":n.alwaysShowText}]]),onClick:r},[n.loading||n.progress||n.icon?(s(),x("div",Dt,[n.loading?(s(),b(p,{key:0,indeterminate:"",small:""})):n.progress?(s(),b(p,{key:1,small:"",value:n.progress},null,8,["value"])):(s(),b(_,{key:2,name:n.icon},null,8,["name"]))])):B("",!0),C("div",Ut,[C("p",Tt,T(n.title),1),n.text?(s(),x("p",Et,T(n.text),1)):B("",!0)]),n.showClose?R((s(),b(_,{key:1,name:n.dismissIcon??"close",clickable:"",class:"close",onClick:r},null,8,["name"])),[[h,n.dismissText]]):B("",!0)],2)}}}),Ue=q(Ot,[["__scopeId","data-v-efae6d48"]]),Lt=z({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(i){const e=ue(),o=Se(e).queue;return(r,n)=>(s(),b(Ce,{class:j(["notifications-group",{"sidebar-open":r.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:a(()=>[J(r.$slots,"default",{},void 0,!0),(s(!0),x(oe,null,se(v(o),(t,p)=>(s(),b(Ue,{id:t.id,key:t.id,title:t.title,text:t.text,icon:t.icon,type:t.type,loading:t.loading,progress:t.progress,tail:p===v(o).length-1,dense:r.sidebarOpen===!1,"show-close":t.persist===!0&&t.closeable!==!1,"always-show-text":t.alwaysShowText,"dismiss-icon":t.dismissIcon,"dismiss-text":t.dismissText,"dismiss-action":t.dismissAction},null,8,["id","title","text","icon","type","loading","progress","tail","dense","show-close","always-show-text","dismiss-icon","dismiss-text","dismiss-action"]))),128))]),_:3},8,["class"]))}}),At=q(Lt,[["__scopeId","data-v-f0dfbda2"]]),Rt={class:"icon"},jt={key:0,class:"title"},Ft=z({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(i){const e=ye(),{sidebarOpen:o}=Se(e);return(r,n)=>{const t=m("v-icon");return s(),b(De(r.to?"router-link":"button"),{class:j(["sidebar-button",{active:r.active}]),onClick:n[0]||(n[0]=p=>r.$emit("click",p))},{default:a(()=>[C("div",Rt,[l(t,{name:r.icon},null,8,["name"])]),v(o)?(s(),x("div",jt,[J(r.$slots,"default",{},void 0,!0)])):B("",!0)]),_:3},8,["class"])}}}),qt=q(Ft,[["__scopeId","data-v-3acfa986"]]),zt={class:"notifications-preview"},Ht={key:0,class:"inline"},Pt={class:"padding-box"},Gt=z({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(i){const{t:e}=ae(),o=ue(),{lastFour:r}=ce(o);return(n,t)=>{const p=m("router-link"),_=m("transition-expand"),h=Q("tooltip");return s(),x("div",zt,[l(_,{tag:"div"},{default:a(()=>[n.modelValue?(s(),x("div",Ht,[C("div",Pt,[l(p,{class:j(["link",{"has-items":v(r).length>0}]),to:"/activity"},{default:a(()=>[F(T(v(e)("show_all_activity")),1)]),_:1},8,["class"]),l(Ce,{tag:"div",name:"notification",class:"transition"},{default:a(()=>[(s(!0),x(oe,null,se(v(r),c=>(s(),b(Ue,at({key:c.id,ref_for:!0},c),null,16))),128))]),_:1})])])):B("",!0)]),_:1}),R((s(),b(qt,{active:n.modelValue,class:"toggle",icon:"pending_actions",onClick:t[0]||(t[0]=c=>n.$emit("update:modelValue",!n.modelValue))},{default:a(()=>[F(T(v(e)("activity_log")),1)]),_:1},8,["active"])),[[h,!n.sidebarOpen&&v(e)("activity_log"),void 0,{left:!0}]])])}}}),Zt=q(Gt,[["__scopeId","data-v-63e60302"]]),Ve=i=>Number.isFinite(i)?i:0;function Kt(i){return{days:Math.trunc(i/864e5),hours:Math.trunc(i/36e5%24),minutes:Math.trunc(i/6e4%60),seconds:Math.trunc(i/1e3%60),milliseconds:Math.trunc(i%1e3),microseconds:Math.trunc(Ve(i*1e3)%1e3),nanoseconds:Math.trunc(Ve(i*1e6)%1e3)}}function Yt(i){return{days:i/86400000n,hours:i/3600000n%24n,minutes:i/60000n%60n,seconds:i/1000n%60n,milliseconds:i%1000n,microseconds:0n,nanoseconds:0n}}function Jt(i){switch(typeof i){case"number":{if(Number.isFinite(i))return Kt(i);break}case"bigint":return Yt(i)}throw new TypeError("Expected a finite number or bigint")}const Qt=i=>i===0||i===0n,Xt=(i,e)=>e===1||e===1n?i:`${i}s`,en=1e-7,tn=24n*60n*60n*1000n;function be(i,e){const o=typeof i=="bigint";if(!o&&!Number.isFinite(i))throw new TypeError("Expected a finite number or bigint");e={...e},e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let r=[];const n=(c,u)=>{const w=Math.floor(c*10**u+en);return(Math.round(w)/10**u).toFixed(u)},t=(c,u,w,g)=>{if(!((r.length===0||!e.colonNotation)&&Qt(c)&&!(e.colonNotation&&w==="m"))){if(g=g??String(c),e.colonNotation){const $=g.includes(".")?g.split(".")[0].length:g.length,f=r.length>0?2:1;g="0".repeat(Math.max(0,f-$))+g}else g+=e.verbose?" "+Xt(u,c):w;r.push(g)}},p=Jt(i),_=BigInt(p.days);if(t(_/365n,"year","y"),t(_%365n,"day","d"),t(Number(p.hours),"hour","h"),t(Number(p.minutes),"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&i<1e3){const c=Number(p.seconds),u=Number(p.milliseconds),w=Number(p.microseconds),g=Number(p.nanoseconds);if(t(c,"second","s"),e.formatSubMilliseconds)t(u,"millisecond","ms"),t(w,"microsecond","µs"),t(g,"nanosecond","ns");else{const $=u+w/1e3+g/1e6,f=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,L=$>=1?Math.round($):Math.ceil($),E=f?$.toFixed(f):L;t(Number.parseFloat(E),"millisecond","ms",E)}}else{const c=(o?Number(i%tn):i)/1e3%60,u=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,w=n(c,u),g=e.keepDecimalsOnWholeSeconds?w:w.replace(/\.0+$/,"");t(Number.parseFloat(g),"second","s",g)}if(r.length===0)return"0"+(e.verbose?" milliseconds":"ms");const h=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(r=r.slice(0,Math.max(e.unitCount,1))),r.join(h)}const nn={class:"latency-indicator"},on=z({__name:"latency-indicator",setup(i){const{t:e}=ae(),o=Pe(),r=S(()=>{const h=ve.sortBy(o.latency,["timestamp"]);return h[h.length-1]}),n=S(()=>{if(!o.latency||o.latency.length===0)return 0;const h=ve.sortBy(o.latency,["timestamp"]),c=h.slice(Math.max(h.length-5,0));let u=0;for(const{latency:w}of c)u+=w;return Math.round(u/c.length)}),t=S(()=>n.value<=250?4:n.value>250&&n.value<=500?3:n.value>500&&n.value<=750?2:1),p=S(()=>{switch(t.value){case 4:return`${e("connection_excellent")}
(${be(n.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${be(n.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${be(n.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${be(n.value)} ${e("latency")})`;default:return null}}),_=S(()=>{switch(t.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(h,c)=>{const u=m("v-progress-circular"),w=m("v-icon"),g=Q("tooltip");return R((s(),x("div",nn,[r.value?(s(),b(w,{key:1,name:_.value},null,8,["name"])):(s(),b(u,{key:0,indeterminate:""}))])),[[g,p.value,void 0,{bottom:!0,end:!0}]])}}}),sn=q(on,[["__scopeId","data-v-93933dfa"]]),an={class:"project-info"},ln={class:"name-container"},rn=z({__name:"project-info",setup(i){const e=Ge(),o=S(()=>{var n,t;return(t=(n=e.info)==null?void 0:n.project)==null?void 0:t.project_name}),r=S(()=>{var n,t;return(t=(n=e.info)==null?void 0:n.project)==null?void 0:t.project_descriptor});return(n,t)=>{const p=m("v-text-overflow");return s(),x("div",an,[l(sn),C("div",ln,[l(p,{placement:"right",class:"name",text:o.value},null,8,["text"]),r.value?(s(),b(p,{key:0,placement:"right",class:"descriptor",text:r.value},null,8,["text"])):B("",!0)])])}}}),cn=q(rn,[["__scopeId","data-v-142557c9"]]),un=z({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(i){const e=i,o=N([]),r=N(!1);return ne(()=>e.sidebarOpen,async n=>{n===!1?o.value=[]:(r.value=!0,await lt(),r.value=!1)}),(n,t)=>{const p=m("v-item-group");return s(),b(p,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=_=>o.value=_),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:r.value},{default:a(()=>[J(n.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),dn=q(un,[["__scopeId","data-v-d961026b"]]),vn=i=>(dt("data-v-678d6a4d"),i=i(),vt(),i),_n={class:"module-nav alt-colors"},mn={class:"module-nav-content"},pn={class:"content-wrapper"},fn={class:"flex-container"},hn=vn(()=>C("div",{class:"spacer"},null,-1)),gn=z({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(i,{emit:e}){var fe,he;const o={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},r=i,n=e,{t}=ae(),p=Ie(),_=S(()=>r.title??null),h=et(r,"splitView",n),c=N(),u=N(),w=N();let g;const $=()=>{var d;clearTimeout(g),(d=c.value)==null||d.classList.remove("hide-overflow-x")};ne(h,()=>{if(!c.value||!u.value)return;c.value.classList.add("hide-overflow-x","hide-overflow-y"),g=setTimeout($,1500);let d,y;const H=()=>{var ie;clearTimeout(d),y==null||y(),(ie=c.value)==null||ie.classList.remove("hide-overflow-y")};d=setTimeout(H,1500),y=Ze(u.value,"transitionend",H)});const{width:f}=Ke(),{width:L}=tt(w),E=S(()=>{if(!h.value)return!0;let d;return f.value>=1260?d=f.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-L.value:f.value>=960?d=f.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-o.collapsedSidebarWidth:d=f.value-o.minContentWidth,d>=r.splitViewMinWidth}),{data:I}=Ye("module-width",{}),V=N(pe((fe=I.value)==null?void 0:fe.nav,o.minModuleNavWidth));ne(V,ve.debounce(d=>{I.value={...I.value??{},nav:d}},300));const Z=N(pe((he=I.value)==null?void 0:he.main,o.minContentWidth));ne(Z,ve.debounce(d=>{I.value={...I.value??{},main:d}},300));const X=N(!1),ee=S(()=>{const d=h.value?r.splitViewMinWidth:0,y=E.value?o.minContentWidth+d:o.minContentWidth;let H;return f.value>=1260?H=f.value-o.moduleBarWidth-y-L.value:f.value>=960?H=f.value-o.moduleBarWidth-y-o.collapsedSidebarWidth:H=f.value-o.moduleBarWidth+o.overlaySpace,Math.max(H,o.minModuleNavWidth)}),G=S(()=>{const d=h.value?r.splitViewMinWidth:0;let y;return f.value>=1260?y=f.value-o.moduleBarWidth-V.value-d-L.value:f.value>=960?y=f.value-o.moduleBarWidth-V.value-d-o.collapsedSidebarWidth:y=f.value-d,Math.max(y,o.minContentWidth)}),le=S(()=>({snapZones:[{width:40,snapPos:o.minModuleNavWidth,direction:"left"},{width:40,snapPos:ee.value,direction:"right"}]})),K=N(!1),te=S(()=>({snapZones:[{width:40,snapPos:o.minContentWidth,direction:"left"},{width:40,snapPos:G.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:X.value})),P=N(!1),O=we(),M=ye(),W=S(()=>{var d;return O.currentUser?((d=O.currentUser)==null?void 0:d.app_access)||!1:!0}),A=N(!1),{sidebarOpen:D,fullScreen:de}=ce(M),_e=S(()=>O.currentUser&&"appearance"in O.currentUser?O.currentUser.appearance:"auto");it("main-element",c),p.afterEach(()=>{var d;(d=c.value)==null||d.scrollTo({top:0}),de.value=!1}),nt({title:_});function me(d){d.target&&d.target.classList.contains("close")===!1&&(D.value=!0)}function pe(d,y){return d&&!Number.isNaN(d)?Number(d):y}return(d,y)=>{const H=m("v-button"),ie=m("v-info"),ge=m("v-overlay");return W.value===!1?(s(),b(ie,{key:0,center:"",title:v(t)("no_app_access"),type:"danger",icon:"block"},{append:a(()=>[l(H,{to:"/logout"},{default:a(()=>[F(T(v(t)("switch_user")),1)]),_:1})]),default:a(()=>[F(T(v(t)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(s(),x("div",{key:1,class:j(["private-view",{appearance:_e.value,"full-screen":v(de),splitView:d.splitView}])},[C("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:j({"is-open":P.value,"has-shadow":d.sidebarShadow})},[l($t),l(xe,{width:V.value,"onUpdate:width":y[0]||(y[0]=U=>V.value=U),"min-width":o.minModuleNavWidth,"max-width":ee.value,options:le.value,onDragging:y[1]||(y[1]=U=>X.value=U),onTransitionEnd:$},{default:a(()=>[C("div",_n,[l(cn),C("div",mn,[J(d.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),C("div",{id:"main-content",ref_key:"contentEl",ref:c,class:"content"},[l(Je,{ref_key:"headerBarEl",ref:u,small:d.smallHeader||d.splitView,shadow:d.headerShadow||d.splitView,"show-sidebar-toggle":"",title:d.title,"onToggle:sidebar":y[2]||(y[2]=U=>D.value=!v(D)),onPrimary:y[3]||(y[3]=U=>P.value=!P.value)},rt({_:2},[se(d.$slots,(U,re)=>({name:re,fn:a(ke=>[J(d.$slots,re,ct(ut(ke)),void 0,!0)])}))]),1032,["small","shadow","title"]),C("div",pn,[l(xe,{width:Z.value,"onUpdate:width":y[4]||(y[4]=U=>Z.value=U),"min-width":o.minContentWidth,"max-width":G.value,disabled:!v(h),options:te.value,onDragging:y[5]||(y[5]=U=>K.value=U)},{default:a(()=>[R(C("main",null,[J(d.$slots,"default",{},void 0,!0)],512),[[Te,E.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),d.splitView?(s(),x("div",{key:0,id:"split-content",class:j({"is-dragging":K.value})},[J(d.$slots,"splitView",{},void 0,!0)],2)):B("",!0)])],512),C("aside",{id:"sidebar",ref_key:"sidebarEl",ref:w,role:"contentinfo",class:j(["alt-colors",{"is-open":v(D),"has-shadow":d.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:me},[C("div",fn,[l(dn,{"sidebar-open":v(D)},{default:a(()=>[J(d.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),hn,l(Zt,{modelValue:A.value,"onUpdate:modelValue":y[6]||(y[6]=U=>A.value=U),"sidebar-open":v(D)},null,8,["modelValue","sidebar-open"])])],2),l(ge,{class:"nav-overlay",active:P.value,onClick:y[7]||(y[7]=U=>P.value=!1)},null,8,["active"]),l(ge,{class:"sidebar-overlay",active:v(D),onClick:y[8]||(y[8]=U=>D.value=!1)},null,8,["active"]),l(It),A.value===!1?(s(),b(At,{key:0,"sidebar-open":v(D)},null,8,["sidebar-open"])):B("",!0),l(xt)],2))}}}),Mn=q(gn,[["__scopeId","data-v-678d6a4d"]]);export{Mn as PrivateView,Mn as default};
